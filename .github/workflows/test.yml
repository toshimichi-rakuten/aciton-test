name: Send Mail Once

on:
  schedule:
    # 2025-11-24 17:42 JST = 2025-11-24 08:42 UTC
    - cron: "42 8 24 11 *"
  workflow_dispatch: # æ‰‹å‹•å®Ÿè¡Œã‚‚å¯èƒ½ï¼ˆãƒ†ã‚¹ãƒˆç”¨ï¼‰

jobs:
  call_api:
    runs-on: ubuntu-latest
    if: github.event_name == 'schedule' # æ‰‹å‹•å®Ÿè¡Œã¯ç„¡è¦–ã—ãŸã„ãªã‚‰å‰Šé™¤å¯
    steps:
      - name: Call API (One-time execution)
        run: |
          curl -X POST "https://outlook-api-v2-854259963531.asia-northeast1.run.app/send-mail" \
            -H "X-API-Key: outlook-api-key-51e10dd52e768f2154ef1971b2e08143" \
            -H "Content-Type: application/json" \
            -d '{
              "to": ["toshimichi.suzuki@rakuten.com"],
              "subject": "2025å¹´11æœˆ æœˆæ¬¡ãƒ¬ãƒãƒ¼ãƒˆ ğŸ“Š",
              "html_body": "<p>test</p>"
            }'
