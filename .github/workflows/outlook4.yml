name: Send Mail Every 4 Hours

on:
  schedule:
    # 4æ™‚é–“ã”ã¨ï¼ˆUTCãƒ™ãƒ¼ã‚¹ï¼‰
    # 0æ™‚, 4æ™‚, 8æ™‚, 12æ™‚, 16æ™‚, 20æ™‚ï¼ˆUTCï¼‰
    # æ—¥æœ¬æ™‚é–“ã ã¨ 9æ™‚, 13æ™‚, 17æ™‚, 21æ™‚, 1æ™‚, 5æ™‚
    - cron: "0 */4 * * *"
  workflow_dispatch: # æ‰‹å‹•å®Ÿè¡Œãƒ†ã‚¹ãƒˆã‚‚ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ãŠã

jobs:
  call_api:
    runs-on: ubuntu-latest
    steps:
      - name: Call Outlook mail API
        run: |
          curl -X POST "https://outlook-api-v2-854259963531.asia-northeast1.run.app/send-mail" \
            -H "X-API-Key: ${{ secrets.OUTLOOK_API_KEY }}" \
            -H "Content-Type: application/json" \
            -d '{
              "to": ["toshimichi.suzuki@rakuten.com"],
              "subject": "4æ™‚é–“ã”ã¨ã®ãƒ†ã‚¹ãƒˆãƒ¡ãƒ¼ãƒ« ğŸ“Š",
              "html_body": "<p>test from GitHub Actions (every 4 hours)</p>"
            }'
